ALTER TABLE MODULE_ENTITY ADD COLUMN MODULE_SYSTEM INTEGER;
ALTER TABLE ROLE ADD COLUMN MODULE_SYSTEM INTEGER;
ALTER TABLE OPTIONS ADD COLUMN URL VARCHAR(500);
ALTER TABLE PURCHASE_ORDER ADD COLUMN PROJECT_ID BIGINT;--DO IT NOT NULLABLE AND A FK.
ALTER TABLE USER_ROLE ADD COLUMN ID INTEGER; -- do it not nullable
ALTER TABLE USER_ROLE ADD COLUMN MODULE_SYSTEM INTEGER;

INSERT INTO PROJECT (PROJECT_NUMBER,ID,STATUS,LAST_UPDATE)
SELECT DISTINCT(PROJECT) AS NUM,ROW_NUMBER() OVER() AS ID, 0 AS ST,CURRENT_DATE
FROM PURCHASE_ORDER 
WHERE STATUS_ID=1
GROUP BY PROJECT;

UPDATE PURCHASE_ORDER SET PROJECT_ID =PR.ID FROM  PURCHASE_ORDER AS PO ,PROJECT AS PR WHERE PR.PROJECT_NUMBER=PO.PROJECT ;

ALTER TABLE p_order alter column currency_id DROP NOT NULL;


insert into p_order(id)
select id 
from purchase_order where status_id=1;

UPDATE PURCHASE_ORDER SET PO_ID =ID where status_id=1 ;

DELETE FROM USER_ROLE;

INSERT INTO USER_ROLE (ROLE_ID,USER_ID,MODULE_SYSTEM,ID)
SELECT ROLE_ID,ID,0,row_number() over()
FROM USERS;

DELETE FROM MODULE_GRANTED_ACCESS;
INSERT INTO MODULE_GRANTED_ACCESS (ID,USER_ID,MODULE_SYSTEM,MODULE_ACCESS)
SELECT ROW_NUMBER() OVER() ,ID,MS,AC
FROM (
SELECT ID,0 AS MS ,TRUE AS AC
FROM USERS
WHERE STATUS_ID=1
UNION
SELECT ID,1 AS MS ,FALSE AS AC
FROM USERS
WHERE STATUS_ID=1) TMP_TBL;



ALTER TABLE USERS DROP COLUMN ROLE_ID;




ALTER TABLE SUPPLIER_PROC ALTER COLUMN STREET TYPE VARCHAR(1000);

ALTER TABLE USERS ALTER COLUMN USER_NAME TYPE VARCHAR(250);
ALTER TABLE USERS ALTER COLUMN PWD_HASH TYPE VARCHAR(250);
ALTER TABLE USERS ALTER COLUMN NAME TYPE VARCHAR(250);
ALTER TABLE USERS ALTER COLUMN EMAIL TYPE VARCHAR(250);
ALTER TABLE USERS ALTER COLUMN FIRST_NAME TYPE VARCHAR(250);


INSERT INTO ROLE(ID,NAME,MODULE_SYSTEM) VALUES (14,'FULL_WITH_COMMIT',1);
INSERT INTO ROLE(ID,NAME,MODULE_SYSTEM) VALUES (15,'FULL',1);
INSERT INTO ROLE(ID,NAME,MODULE_SYSTEM) VALUES (16,'RESTRICTED',1);
INSERT INTO ROLE(ID,NAME,MODULE_SYSTEM) VALUES (17,'READ_ONLY',1);


DELETE FROM ROLE_OPTION;
DELETE FROM OPTIONS;

INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1,'USER_LIST',3,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(2,'USER_CREATE',3,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(3,'USER_UPDATE',3,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(4,'USER_VIEW',3,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(5,'USER_DELETE',3,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(100,'PURCHASE_ORDER_LIST',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(101,'PURCHASE_ORDER_CREATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(102,'PURCHASE_ORDER_UPDATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(103,'PURCHASE_ORDER_VIEW',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(104,'PURCHASE_ORDER_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(105,'PURCHASE_ORDER_SPLIT_POIR',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(106,'HOME',1,'home.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(200,'REPORT_LIST',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(201,'REPORT_RECEIVABLE_MANIFEST',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(202,'REPORT_JOB_SUMMARY',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(300,'EDIT_PROJECT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(301,'EDIT_PO_REFERENCE',1,'');
--Starts permission for procurement
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(400,'ADMIN',1,'procurement/admin/admin.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(401,'SUPPLIER_LIST',1,'procurement/admin/supplier/list.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(402,'SUPPLIER_CREATE',1,'procurement/admin/supplier/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(403,'SUPPLIER_EDIT',1,'procurement/admin/supplier/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(405,'SUPPLIER_VIEW',1,'procurement/admin/supplier/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(404,'SUPPLIER_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(500,'USER_LIST_P',1,'procurement/admin/user/list.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(501,'USER_CREATE_P',1,'procurement/admin/user/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(502,'USER_EDIT_P',1,'procurement/admin/user/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(503,'USER_VIEW_P',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(504,'USER_DELETE_P',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(505,'USER_RESET_P',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(506,'PROFILE',1,'procurement/profile/profile.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(600,'CURRENCY_LIST',1,'procurement/admin/currency/currency.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(601,'CURRENCY_CREATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(602,'CURRENCY_EDIT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(603,'CURRENCY_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(700,'BRAND_LIST',1,'procurement/admin/brands/brands.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(701,'BRAND_CREATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(702,'BRAND_EDIT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(703,'BRAND_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(800,'CATEGORY_LIST',1,'procurement/admin/category/category.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(801,'CATEGORY_CREATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(802,'CATEGORY_EDIT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(803,'CATEGORY_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(900,'STANDARD_TEXT_LIST',1,'procurement/admin/textSnippet/textSnippet.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(901,'STANDARD_TEXT_CREATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(903,'STANDARD_TEXT_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(902,'STANDARD_TEXT_EDIT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1000,'LOGO_LIST',1,'procurement/admin/logo/logo.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1001,'LOGO_CREATE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1002,'LOGO_EDIT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1003,'LOGO_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1004,'LOGO_LIST_PREVIEW',1,'procurement/admin/logo/preview.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1100,'CLIENT_LIST',1,'procurement/admin/client/list.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1101,'CLIENT_CREATE',1,'procurement/admin/client/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1102,'CLIENT_EDIT',1,'procurement/admin/client/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1103,'CLIENT_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1200,'REPORT_LIST_P',1,'procurement/report/report.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1201,'REPORT_DELIVERABLE',1,'procurement/report/deliverables/deliverables.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1202,'REPORT_BIDDER_LIST',1,'procurement/report/bidderList/categorySelection.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1203,'REPORT_PROJECT_PROCUREMENT',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1204,'REPORT_DETAILED_PROCUREMENT',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1205,'REPORT_SUMMARY_PO',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1207,'REPORT_PROJECT_SUPPLIER_CONTACTS',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1208,'REPORT_REQUIRED_RETENTIONS',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1209,'REPORT_COMMITTED_CURRENCIES',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1210,'REPORT_MATERIALS_REQUISITION',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1211,'REPORT_UNCOMMITTED_DATA',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1212,'REPORT_DETAILED_SUPPLIER',1,'procurement/report/print-reports.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1213,'REPORT_EXPEDITING',1,'procurement/report/expediting/expediting.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1300,'PROJECT_LIST',1,'procurement/project/list.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1301,'PROJECT_CREATE',1,'procurement/project/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1302,'PROJECT_EDIT',1,'procurement/project/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1303,'PROJECT_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1304,'PROJECT_VIEW',1,'procurement/project/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1400,'PO_LIST',1,'procurement/project/purchase-order/list.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1401,'PO_CREATE',1,'procurement/project/purchase-order/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1402,'PO_EDIT',1,'procurement/project/purchase-order/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1403,'PO_DELETE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1404,'PO_VIEW',1,'procurement/project/purchase-order/edit.jsf');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1405,'PO_COMMIT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1406,'PO_PRINT',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1407,'PO_RELEASE',1,'');
INSERT INTO OPTIONS(id,name,module_id,url) VALUES(1408,'PO_VARIATION',1,'');




INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(1,1,13);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(2,2,13);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(3,3,13);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(4,4,13);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(5,5,13);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(6,106,13);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(100,100,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(101,101,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(102,102,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(103,103,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(104,104,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(105,105,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(106,200,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(107,201,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(108,202,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(109,300,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(110,301,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(111,106,10);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(200,100,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(201,102,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(202,103,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(203,105,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(204,200,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(205,201,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(206,202,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(207,106,11);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(300,100,12);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(301,103,12);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(302,106,12);


INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(400,400,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(401,401,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(402,402,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(403,403,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(404,404,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(405,405,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(406,500,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(407,501,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(408,502,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(409,503,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(410,504,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(411,505,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(412,506,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(413,600,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(414,601,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(415,602,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(416,603,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(417,700,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(418,701,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(419,702,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(420,703,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(421,800,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(422,801,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(423,802,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(424,803,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(425,900,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(426,901,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(427,902,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(428,903,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(429,1000,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(430,1001,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(431,1002,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(432,1003,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(433,1004,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(434,1100,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(435,1101,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(436,1102,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(437,1103,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(438,1200,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(439,1201,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(440,1202,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(441,1203,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(442,1204,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(443,1205,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(444,1207,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(445,1208,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(446,1209,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(447,1210,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(448,1211,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(449,1212,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(450,1213,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(451,1300,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(452,1301,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(453,1302,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(454,1303,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(455,1304,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(456,1400,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(457,1401,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(458,1402,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(459,1403,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(460,1404,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(461,1405,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(462,1406,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(463,1407,14);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(464,1408,14);

INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(500,400,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(501,401,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(502,402,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(503,403,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(504,404,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(505,405,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(506,500,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(507,501,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(508,502,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(509,503,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(510,504,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(511,505,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(512,506,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(513,600,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(514,601,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(515,602,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(516,603,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(517,700,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(518,701,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(519,702,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(520,703,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(521,800,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(522,801,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(523,802,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(524,803,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(525,900,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(526,901,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(527,902,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(528,903,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(529,1000,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(530,1001,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(531,1002,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(532,1003,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(533,1004,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(534,1100,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(535,1101,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(536,1102,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(537,1103,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(538,1200,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(539,1201,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(540,1202,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(541,1203,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(542,1204,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(543,1205,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(544,1207,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(545,1208,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(546,1209,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(547,1210,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(548,1211,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(549,1212,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(550,1213,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(551,1300,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(552,1301,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(553,1302,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(554,1303,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(555,1304,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(556,1400,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(557,1401,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(558,1402,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(559,1403,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(560,1404,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(561,1406,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(562,1407,15);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(563,1408,15);

INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(600,1200,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(601,1201,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(602,1202,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(603,1203,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(605,1204,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(606,1205,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(607,1207,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(608,1208,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(609,1209,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(610,1210,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(611,1211,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(612,1212,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(613,1213,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(614,1300,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(615,1301,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(616,1302,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(617,1303,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(618,1304,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(619,1400,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(620,1401,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(621,1402,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(622,1403,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(623,1404,16);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(624,506,16);

INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(700,1300,17);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(701,1304,17);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(702,1400,17);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(703,1404,17);
INSERT INTO ROLE_OPTION(id,option_id,role_id) VALUES(704,506,17);

UPDATE SUPPLIER SU SET STATUS_ID=3
FROM PURCHASE_ORDER PO
INNER JOIN SUPPLIER SP ON SP.PURCHASE_ORDER_ID=PO.ID
WHERE PO.STATUS_ID=3 AND SU.ID=SP.ID;

INSERT INTO SUPPLIER_PROC (ID,COMPANY,STREET,LAST_UPDATE,STATUS,SUPPLIER_ID,PHONE)
SELECT ID,SUPPLIER,ADDRESS,CURRENT_DATE,0,'',CONTACT_DETAIL
FROM SUPPLIER 
WHERE STATUS_ID=1 AND SUPPLIER IN (
			SELECT SUPPLIER 
			FROM SUPPLIER S INNER JOIN PURCHASE_ORDER POR ON POR.ID=S.PURCHASE_ORDER_ID AND POR.STATUS_ID=1
			WHERE S.STATUS_ID=1 AND SUPPLIER IS NOT NULL AND LENGTH(TRIM(SUPPLIER))>0 AND ADDRESS IS NOT NULL AND LENGTH(TRIM(ADDRESS))>0
			GROUP BY SUPPLIER
			HAVING COUNT(*)=1
) ;

INSERT INTO CONTACT (ID,FIRST_NAME,EMAIL,STATUS,LAST_UPDATE,SUPPLIER_ID,SUR_NAME)
SELECT ID,CONTACT_NAME,EMAIL_ADDRESS,0,CURRENT_DATE,ID,''
FROM SUPPLIER 
WHERE STATUS_ID=1 AND SUPPLIER IN (
			SELECT SUPPLIER 
			FROM SUPPLIER S INNER JOIN PURCHASE_ORDER POR ON POR.ID=S.PURCHASE_ORDER_ID AND POR.STATUS_ID=1
			WHERE S.STATUS_ID=1 AND SUPPLIER IS NOT NULL AND LENGTH(TRIM(SUPPLIER))>0 AND ADDRESS IS NOT NULL AND LENGTH(TRIM(ADDRESS))>0
			GROUP BY SUPPLIER
			HAVING COUNT(*)=1
) ;



INSERT INTO SUPPLIER_PROC (ID,COMPANY,STREET,LAST_UPDATE,STATUS,SUPPLIER_ID,PHONE)
SELECT ID,SUPPLIER,ADDRESS,CURRENT_DATE,0,'',CONTACT_DETAIL
FROM SUPPLIER 
WHERE STATUS_ID=1 AND ID IN (
			SELECT MIN(S.ID) 
			FROM SUPPLIER S INNER JOIN PURCHASE_ORDER POR ON POR.ID=S.PURCHASE_ORDER_ID AND POR.STATUS_ID=1
			WHERE S.STATUS_ID=1 AND SUPPLIER IS NOT NULL AND LENGTH(TRIM(SUPPLIER))>0 AND ADDRESS IS NOT NULL AND LENGTH(TRIM(ADDRESS))>0
			GROUP BY SUPPLIER
			HAVING COUNT(*)>1
) ;

INSERT INTO CONTACT (ID,FIRST_NAME,EMAIL,STATUS,LAST_UPDATE,SUPPLIER_ID,SUR_NAME)
SELECT ID,CONTACT_NAME,EMAIL_ADDRESS,0,CURRENT_DATE,ID,''
FROM SUPPLIER 
WHERE STATUS_ID=1 AND ID IN (
			SELECT MIN(S.ID) 
			FROM SUPPLIER S INNER JOIN PURCHASE_ORDER POR ON POR.ID=S.PURCHASE_ORDER_ID AND POR.STATUS_ID=1
			WHERE S.STATUS_ID=1 AND SUPPLIER IS NOT NULL AND LENGTH(TRIM(SUPPLIER))>0 AND ADDRESS IS NOT NULL AND LENGTH(TRIM(ADDRESS))>0
			GROUP BY SUPPLIER
			HAVING COUNT(*)>1
) ;

UPDATE P_ORDER AS PP SET SUPPLIER_ID=SP.ID
FROM SUPPLIER AS S ,SUPPLIER_PROC AS SP, P_ORDER AS POR
WHERE SP.COMPANY=S.SUPPLIER AND POR.ID=PURCHASE_ORDER_ID AND PP.id=POR.ID;

UPDATE P_ORDER AS PP SET CONTACT_ID=SP.ID
FROM SUPPLIER AS S ,SUPPLIER_PROC AS SP, P_ORDER AS POR,CONTACT CT
WHERE SP.COMPANY=S.SUPPLIER AND POR.ID=PURCHASE_ORDER_ID AND PP.id=POR.ID AND S.STATUS_ID=1 AND CT.ID=S.ID;

INSERT INTO USERS (ID,EMAIL,FIRST_NAME,NAME,PWD_HASH,STATUS_ID,USER_NAME,LAST_UPDATE)
SELECT MAX (ID)+1,'admin@info.com','admin','admin','jzae727k08kaomksgoagzww/xvqgr/pkegimkjrcbji=',1,'admin',CURRENT_DATE
FROM USERS;

INSERT INTO MODULE_GRANTED_ACCESS (ID,USER_ID,MODULE_SYSTEM,MODULE_ACCESS)
SELECT MAX(ID)+1,(SELECT MAX(ID) FROM USERS),0,TRUE
FROM MODULE_GRANTED_ACCESS;
INSERT INTO MODULE_GRANTED_ACCESS (ID,USER_ID,MODULE_SYSTEM,MODULE_ACCESS)
SELECT MAX(ID)+1,(SELECT MAX(ID) FROM USERS),1,TRUE
FROM MODULE_GRANTED_ACCESS;


INSERT INTO USER_ROLE (USER_ID,ROLE_ID,MODULE_SYSTEM,ID)
SELECT (SELECT MAX(ID) FROM USERS),10,0,MAX(ID)+1
FROM USER_ROLE;
INSERT INTO USER_ROLE (USER_ID,ROLE_ID,MODULE_SYSTEM,ID) 
SELECT (SELECT MAX(ID) FROM USERS),14,1,MAX(ID)+1
FROM USER_ROLE;

SELECT SETVAL('users_id_seq', (SELECT MAX(ID)+1 FROM USERS)); 



