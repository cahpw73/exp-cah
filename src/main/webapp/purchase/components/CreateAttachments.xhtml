<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <h4 class="sub-header">#{msgs['po.attachments.title']}</h4>
    <p:dataTable id="commentList" value="#{purchaseOrderCreate.commentEntities}" rowIndexVar="_index" var="_comment">
        <p:column headerText="#{msgs['po.attach.tbl.column.date']}" style="width: 20%;">

        </p:column>
        <p:column headerText="#{msgs['po.attach.tbl.column.from']}" sortBy="#{_comment.name}" sortFunction="#{sortScopeSupply.sortDescription}" >
            #{_comment.name}
        </p:column>
        <p:column headerText="#{msgs['po.attach.tbl.column.reason']}" sortBy="#{_comment.reason}" sortFunction="#{sortScopeSupply.sortDescription}">
            #{_comment.reason}
        </p:column>
        <p:column headerText="#{msgs['po.attach.tbl.column.observations']}" sortBy="#{_comment.description}" sortFunction="#{sortScopeSupply.sortDescription}">
            #{_comment.description}
        </p:column>
        <p:column headerText="#{msgs['lbl.attachment']}" sortBy="#{_comment.fileName}" sortFunction="#{sortScopeSupply.sortDescription}">
            #{_comment.fileName}
        </p:column>
        <p:column headerText="#{msgs['lbl.action']}">
            <h:commandLink styleClass="btn btn-primary btn-sm color-btn-data-table" value="#{msgs['lbl.delete']}">
                <p:ajax listener="#{purchaseOrderCreate.deleteComment(_index)}" update="commentList"/>
            </h:commandLink>
            &#160;
            <h:commandLink styleClass="btn btn-primary btn-sm color-btn-data-table" value="#{msgs['lbl.edit']}">
                <p:ajax process="@this"  listener="#{purchaseOrderCreate.editComment(_index)}"
                        onsuccess="PF('commentEditModal').show();" update=":commentEditFormId"/>
            </h:commandLink>
        </p:column>

    </p:dataTable>
    <h:commandButton type="button" styleClass="btn btn-primary btn-sm component-left" action="#{purchaseOrderCreate.cleanComment}" value="#{msgs['lbl.add.comment']}">
        <p:ajax update=":commentModalId" oncomplete="PF('commentModal').show();" immediate="true"/>
    </h:commandButton>

</ui:composition>
