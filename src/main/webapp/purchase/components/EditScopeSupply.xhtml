<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h4 class="sub-header fq-sub-header">#{msgs['po.supply.scope.title']}</h4>
    <div class="fq-form-table">
        <p:dataTable id="scopeSupplyList" var="_scopeSupply" value="#{purchaseOrderEdit.activeScopeSupplies}" rowKey="#{_index+1}"
                     rowIndexVar="_index">
            <p:column headerText="#{msgs['po.supply.scope.column.code']}" sortBy="#{_scopeSupply.code}" width="4%"
                      sortFunction="#{sortBean.sortItemNumber}">
                #{_scopeSupply.code}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.quantity']}" sortBy="#{_scopeSupply.quantity}" width="3%"
                      sortFunction="#{sortBean.sortIntegers}">
                #{_scopeSupply.quantity}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.unit']}" sortBy="#{_scopeSupply.unit}" width="3%"
                      sortFunction="#{sortBean.sortStrings}">
                #{_scopeSupply.unit}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.description']}" sortBy="#{_scopeSupply.description}" width="9%"
                      sortFunction="#{sortBean.sortStrings}">
                #{_scopeSupply.description}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.lbl.inco.term']}" sortBy="#{_scopeSupply.spIncoTerm}" width="5%"
                      sortFunction="#{sortBean.sortStrings}">
                #{_scopeSupply.spIncoTerm}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.original.delivery.date']}" sortBy="#{_scopeSupply.deliveryDate}" width="9%"
                      sortFunction="#{sortBean.sortDate}">
                 #{util.toLocal(_scopeSupply.deliveryDate)}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.forecast.ex.works.date']}" sortBy="#{_scopeSupply.exWorkDate}" width="9%"
                      sortFunction="#{sortBean.sortDate}">
                #{util.toLocal(_scopeSupply.exWorkDate)}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.actual.ex.works.date']}" sortBy="#{_scopeSupply.actualExWorkDate}" width="9%"
                      sortFunction="#{sortBean.sortDate}">
                #{util.toLocal(_scopeSupply.actualExWorkDate)}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.lead.time']}" sortBy="#{_scopeSupply.customLeadTime}" width="5%"
                      sortFunction="#{sortBean.sortLeadTime}">
                #{_scopeSupply.deliveryLeadTimeQt}
                &#160;
                #{_scopeSupply.deliveryLeadTimeMs}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.forecast.site.date']}" sortBy="#{_scopeSupply.siteDate}" width="8%"
                      sortFunction="#{sortBean.sortDate}">
                #{util.toLocal(_scopeSupply.siteDate)}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.required.site.date']}" sortBy="#{_scopeSupply.requiredSiteDate}" width="8%"
                      sortFunction="#{sortBean.sortDate}">
                #{util.toLocal(_scopeSupply.requiredSiteDate)}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.actual.site.date']}" sortBy="#{_scopeSupply.actualSiteDate}" width="8%"
                      sortFunction="#{sortBean.sortDate}">
                #{util.toLocal(_scopeSupply.actualSiteDate)}
            </p:column>
            <p:column headerText="#{msgs['po.supply.scope.column.responsible.expediting']}" sortBy="#{_scopeSupply.responsibleExpediting}" width="4%"
                      sortFunction="#{sortBean.sortStrings}">
                #{_scopeSupply.responsibleExpediting}
            </p:column>
            <p:column headerText="#{msgs['lbl.action']}" width="15%">
                <div class="pull-right">
                    <h:commandLink styleClass="btn btn-primary btn-sm color-btn-data-table"  value="#{msgs['lbl.edit']}"
                                   action="#{purchaseOrderEdit.selectScopeSuppplyForEditing(_scopeSupply.id)}"/>
                    &#160;
                    <h:commandLink rendered="#{permissionBean.hasPermission(105)}"
                                   disabled="#{not (_scopeSupply.quantity!=null and _scopeSupply.quantity>1)}"
                                   styleClass="btn btn-primary btn-sm color-btn-data-table #{(not (_scopeSupply.quantity!=null and _scopeSupply.quantity>1))?'disabled':''} "
                                   action="#{purchaseOrderEdit.selectScopeSupply(_scopeSupply.id)}"
                                   value="#{msgs['supply.scope.lbl.split']}"/>
                    &#160;
                    <h:commandLink value="#{msgs['lbl.delete']}" styleClass="btn btn-primary btn-sm color-btn-data-table"  >
                        <p:ajax update="scopeSupplyList" listener="#{purchaseOrderEdit.deleteScopeSupply(_scopeSupply.id)}"/>
                    </h:commandLink>
                </div>
            </p:column>
        </p:dataTable>
        <h:commandButton styleClass="component-left btn btn-primary btn-sm pull-right" value="#{msgs['lbl.add.scope.supply']}"
                         action="#{purchaseOrderEdit.cleanScopeSupply}">
        </h:commandButton>
    </div>

</ui:composition>
