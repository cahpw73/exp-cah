<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <h2 class="sub-header">#{msgs['po.attachments.title']}</h2>
    <p:dataTable id="commentList" value="#{purchaseOrderEdit.activeComments}" rowIndexVar="_index" var="_comment">
        <p:column headerText="#{msgs['po.attach.tbl.column.from']}" style="width: 15%;">
            #{_comment.name}
        </p:column>
        <p:column headerText="#{msgs['po.attach.tbl.column.observations']}" style="width: 20%;">
            #{_comment.description}
        </p:column>
        <p:column headerText="#{msgs['lbl.action']}" style="width: 30%;">
            <h:commandLink value="#{msgs['lbl.delete']}">
                <p:ajax update="commentList" process="@this" listener="#{purchaseOrderEdit.deleteComment(_comment.id)}"/>
            </h:commandLink>
            &#160;
            <h:commandLink value="#{msgs['lbl.edit']}">
                <p:ajax oncomplete="PF('commentUpdateModal').show();" update=":commentEditFormId" process="@this" listener="#{purchaseOrderEdit.selectComment(_comment.id)}"/>
            </h:commandLink>
            &#160;
            <h:panelGroup rendered="#{_comment.fileName ne null}">
                <h:commandLink action="#{purchaseOrderEdit.downloadAttachedFileOnComment(_comment.id)}" rendered="#{_comment.id>0}" value="#{msgs['lbl.download']}"/>
            </h:panelGroup>
        </p:column>
        <p:column headerText="#{msgs['lbl.attachment']}" style="width: 20%;">
            #{_comment.fileName}
        </p:column>
    </p:dataTable>
    <h:commandButton styleClass="component-left btn btn-primary" value="#{msgs['lbl.add.comment']}" action="#{purchaseOrderEdit.cleanComment()}" >
        <p:ajax update=":commentModalId" oncomplete="PF('commentEditModal').show();"/>
    </h:commandButton>
</ui:composition>
