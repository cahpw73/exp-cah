<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf/passthrough">
    <div class="row">
        <div class="col-sm-4">
            <div class="left-inner-addon">
                <i class="fa fa-search fa-lg"></i>
                <h:inputText id="searchTermId" styleClass="form-control input-search"
                             value="#{projectListBean.searchTerm}"
                             jsf:placeholder="#{msgs['project.standard.text.lbl.search.global.text']}"
                             type="search" maxlength="250"/>
            </div>
        </div>
        <div class="col-sm-3">
            <h:commandButton value="#{msgs['lbl.search']}" styleClass="btn btn-primary btn-sm">
                <p:ajax process="@this"
                        listener="#{projectListBean.doSearch}"/>
            </h:commandButton>
        </div>
    </div>
    <br/>

    <div class="row">
        <div style="width: 1500px!important;">

            <div style="width: 415px!important; float: left!important; margin-left: 15px!important;">
                <h:outputText value="#{msgs['project.standard.text.lbl.global.text']}"/>
                <br/>
                <p:dataTable id="globalTextDt" var="_gt"
                             value="#{projectBean.globalStandardTextList}"
                             selectionMode="multiple" scrollable="true" scrollHeight="300"
                             selection="#{projectBean.selectedGlobalTexts}"
                             rowKey="#{_gt.id}">
                    <p:column headerText="#{msgs['project.standard.text.column.code']}"
                              style="width: 100px!important;">
                            #{_gt.code}
                    </p:column>
                    <p:column headerText="#{msgs['project.standard.text.column.description']}">
                        <div class="content-big-text">
                            #{_gt.textSnippet}
                        </div>
                    </p:column>
                </p:dataTable>
            </div>
            <div style="width: 100px!important; float: left!important; margin-left: 20px!important; top: 100px!important; position: relative;">
                <h:commandButton value="#{msgs['lbl.add']} &#62;&#62;"
                                 action="#{projectBean.addToProjectText}"
                                 styleClass="btn btn-primary btn-sm"
                                 style="margin-bottom: 20px!important;">
                    <p:ajax update="globalTextDt,projectTextDt"
                            process="@this,globalTextDt" async="false"/>
                </h:commandButton>
                <br/>
                <h:commandButton value="#{msgs['lbl.remove']} &#60;&#60;"
                                 action="#{projectBean.removeFromProjectText}"
                                 styleClass="btn btn-primary btn-sm">
                    <p:ajax update="globalTextDt projectTextDt"
                            process="@this,projectTextDt" async="false"/>
                </h:commandButton>
            </div>
            <div style="width: 650px!important; float: left!important;">
                <h:outputText value="#{msgs['project.standard.text.lbl.project.text']}"/>
                <br/>
                <h:panelGroup id="itemsGroup">
                    <p:dataTable id="projectTextDt" var="_pt"
                                 value="#{projectBean.filteredList()}"
                                 selectionMode="multiple" scrollable="true" scrollHeight="300"
                                 selection="#{projectBean.selectedProjectTexts}"
                                 rowKey="#{_pt.id}">
                        <ui:remove>
                            <p:column headerText="#{msgs['project.standard.text.column.code']}">

                                <h:panelGroup id="viCostCode" rendered="#{!_pt.isEditable}">
                                    <h:outputText value="#{_pt.code}"/>
                                </h:panelGroup>
                                <h:panelGroup id="edCostCode" rendered="#{_pt.isEditable}">
                                    <h:inputText id="costCodeItem" value="#{_pt.code}" styleClass="form-control">
                                    </h:inputText>
                                </h:panelGroup>
                            </p:column>
                        </ui:remove>
                        <p:column headerText="#{msgs['project.standard.text.column.description']}"
                                  style="width: 80%!important;">
                            <h:panelGroup id="viDescription" rendered="#{!_pt.isEditable}">
                                <div class="content-big-text">
                                    <h:outputText value="#{_pt.description}"/>
                                </div>
                            </h:panelGroup>
                            <h:panelGroup id="edDescription" rendered="#{_pt.isEditable}">
                                <p:inputTextarea id="description" value="#{_pt.description}" styleClass="form-control"
                                                 required="true" requiredMessage="Enter a description in Project Text"
                                                 style="height: 180px!important;">
                                </p:inputTextarea>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{msgs['lbl.actions']}" >
                            <p:commandLink value="#{msgs['lbl.edit']}" rendered="#{!_pt.isEditable}" process="@this"
                                           action="#{projectBean.editItem(_pt)}" update="projectTextDt :glbMsgs" async="false"/>
                            <p:commandLink value="#{msgs['lbl.save']}" rendered="#{_pt.isEditable}" process=":editForm:itemsGroup"
                                           action="#{projectBean.confirmItem(_pt)}" update="projectTextDt :editForm:projectGlobalMsg" async="false"/>
                            &#160;
                            <p:commandLink value="#{msgs['lbl.cancel']}" rendered="#{_pt.isEditable}" process="@this"
                                           action="#{projectBean.cancelEditionItem(_pt)}" update="projectTextDt" async="false"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
                <br/>

                <h:commandButton
                        value="#{msgs['project.standard.text.lbl.btn.add.custom.text']}"
                        onclick="PF('textSnippetModal').show();"
                        action="#{textSnippetBean.clear}"
                        styleClass="btn btn-primary btn-sm">
                    <p:ajax async="false" update=":textSnippetModalId" process="@this"/>
                </h:commandButton>
            </div>
        </div>
    </div>
</ui:composition>
